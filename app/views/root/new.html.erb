
<!DOCTYPE html >
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>ルート案内</title>
    <script src="https://maps.google.com/maps?file=api&v=2&key=AIzaSyCh7zzxsUzcplpoidepQv8Wb6Bhe794pdo&sensor=false"
            type="text/javascript" charset="utf-8"></script>


    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 85%;
        width: 70%;
      }

    </style>
  </head>
  <body onload="initialize()" onunload="GUnload()">

    <div id="map" style=float:left;></div>
    <div id="route" style="margin-top: 80px;width: 300px; height: 600px;float:right;;overflow: scroll"></div>

<ul class="btn-line">
<li>
    <form>
    from：<input type="text" id="from" size="20" value=" <%= @start.lat %> ,<%= @start.lng %> "/>
    to：<input type="text" id="to" size="20" value="<%= @gool.lat %> ,<%= @gool.lng %>" />　   　　
    </form>
  </li>
    <li>
      <input type=button class='btn  btn-new'id="btn" value="ルート表示" onclick="dispRoute()" />
    </li>
    <li>　
    <%= link_to '経路案内開始', "https://maps.google.com/maps?saddr=#{@start.lat},#{@start.lng}&daddr=#{@gool.lat},#{@gool.lng}&dirflg=d" , class: 'btn btn-black btn-block'%>
    </li>
    </ul>


<script>

var map;
var directions;

function initialize() {


  if (GBrowserIsCompatible()) {
    map = new GMap2(document.getElementById("map"));
    map.setCenter(new GLatLng(35.681379,139.765577), 9);

    directions = new GDirections(map, document.getElementById('route'));
  }
}

function dispRoute() {
  var from = document.getElementById("from").value;
  var to = document.getElementById("to").value;

  directions.clear();
　　str = 'from: ' + from + ' to: ' + to;

  directions.load(str, {locale: 'ja_JP'});
}


</script>


  </body>
</html>
